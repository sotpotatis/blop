import os, json, logging

logger = logging.getLogger(__name__)
#Helper functions
SERVER_FILEPATH = os.path.realpath(__file__)
SERVER_DIRECTORY = os.path.dirname(SERVER_FILEPATH)
WEBSITE_INDEX_FILE_PATH = os.path.join(SERVER_DIRECTORY, "website_index.json")
WEBSITE_INDEX_TEMPLATE_FILEPATH = os.path.join(SERVER_DIRECTORY, "website_index.html")
WEBSITE_INDEX_TEMPLATE_FILEPATH_OUT = os.path.join(SERVER_DIRECTORY, "website_index_out.html")

def get_website_index_file():
    '''Gets the index file for websites. This is where an index of the
    current websites are tracked.'''
    return json.loads(open(WEBSITE_INDEX_FILE_PATH, "r").read())

def update_website_index(new_content:dict):
    '''Updates the index file for websites.

    :param new_content: New content to write to the file.
    '''
    logger.info("Updating website index content file...")
    with open(WEBSITE_INDEX_FILE_PATH, "w") as website_index_file:
        website_index_file.write(json.dumps(new_content, default=str, indent=True))
    logger.info("Website index content file updated.")

#ASCII art
COMPASS_LOGO_ASCII = """
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&GY?!^::::::^~7YG#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&57^^^!?JY55P5YJ?!~^^!5#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#J^^!JG#&@@@@@@@@@@&#GY7^^7B@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@Y^~?P&@@@@@@@@@@@@@@@@@@&GJ~^?&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&7^?P&@@@@@@@@@@@@@@@@@@@@@@&P?~~#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@7~JG@@@@@@@@@@@@@@@@@@@@@@@@@@BJ~~&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@P^?P&@@@@@@@@@@@@@@@@@@@@@@@@@@@GJ~J@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@7!YB@@@@@@@@@@@@@@@@@@@@@@@@@@@@#57~@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@7!YB@@@@@@@@@@@@@@@@@@@@@@@@@@@@#57~&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@J~JG@@@@@@@@@@@@@@@@@@@@@@@@@@@@BY!!@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B^75#@@@@@@@@@@@@@@@@@@@@@@@@@@&P?^P@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@5^75#@@@@@@@&BGPPPGB#&@@@@@@@&P?^J@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@5^~JG@@@@BY7~~~!7?JYPG#@@@@BY!^J@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#7^~JG#P7!~^^^~7?JY5PPG&GJ!^!G@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B?^^7J?77!!77?JY5PPPPY^^7G@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&P55YYJJJJY55PPPPPP55#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&PPPPPPPPPPPPPPPP#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B555PPPPPP55YJJP@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B55555555YJ?7J@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&#P??JJJJJJJJ??7!Y#&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&#BG5YJJ??7777777777777777??JJY5PB#&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#GPYJ?777777??JJJJJJJJJJJJJJJJ??777777?JY5G#&@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@&G5J?77!77?JJJYJJ?J?77777JJ77777?J?JJJYJJ?77!!7?J5G#@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@#GY?7!!7?JYJJY?Y?J7~~7J^^^^^~~^^^^^??~~~!7YJJJJYJ?7!!7?YP#@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@&GY?7!!7?JJJ77!~JJ77^^^^^J^::::~~:::::J^^^^^~!!7!!!7JJYJ7!!!?YP&@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@#5?7!~!?JJ?7!??^^^^^^!:::::7!:^^^~~^^^^~J:::::!^::^^^7J!!?JJJ!~~7?5#@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@#5?!~~7JJJJJ7~^^7?^::::~!^~~~!J!!!!!!!!!~?7~~~~~!:::::77^^~~7JJJY?~^!7YB@@@@@@@@@@@@
@@@@@@@@@@@@@@&57!^^?YJ?JJ?~^^:::~?~^~!!!!!!!!J!!!!!~~!!!J!!!!!!!!~~^?!:::^:7??J7?Y?~^~7Y#@@@@@@@@@@
@@@@@@@@@@@@@G?!^:7Y?7!~~?^~!^:^~!7?7!!!!!~^^^^^:::::::::^^^^~!!!!!7?7~~^:^~~:^~~!!?Y?^:~75@@@@@@@@@
@@@@@@@@@@@&J!^.!JJ7??!^::::^!~!!!77?!^^::::.....::::::......::::^~?!!!!!~!^::::^~??7?Y7.^!?#@@@@@@@
@@@@@@@@@@B7~::?J?7~~~77!^:^~!!!!!~!7~:..........^5J~~~...........::^~~!!!!~~^:~77~~~!7JJ^.~!P@@@@@@
@@@@@@@@@G!~.^J?7J?^^::^!777!!!~^:::!?7~:........:!75?~.............:::^~!!!!77!^::^^!JJJJ~.^!5@@@@@
@@@@@@@@P!~:!J??Y?~~^::^~!!7?!^:.:..:7??7^.......^!:~?^...........::..::::~?7!!~^::^^~7J77J7^~!5@@@@
@@@@@@@G77~!J?!!7?^^~~~!!!!~^:::.:~^!~7???!^.......^^............:!!^~^.:::^~!!!!~~~~^^~!!7J?~775@@@
@@@@@@#??!7J?7!~^::::~!!!!~::::..~!7?~:!?7?7~......^^.............~!7!^..::::~!!!!~:::::^!77J?7??G@@
@@@@@@JJ??J?7777!!~^~!!!!~:::....:^^.:^^~7?7?!:....:^...........:^:.^::....:::^!!!!~^~~!77?7?JJJJ?&@
@@@@@G?JJJ?7!~^^^~~77777~:::...........:^^!?7?7^...:^.........:^:...........:::^77777!~^^^~!7?JJJ?5@
@@@@@J7????7J7^:::^!!!!!:::................~7?7?!. :^........................:::!!!!!^:::^~?JY??777#
@@@@B!!!7?JYY!~~~^~!!!!^:::.................^7?7?7^^~.........................:::!!!!!^~~~^JY??7~~!P
@@@@P~^^7?7??^^^^^!!!!~:::....................!7!~~^^^^^:.....................:::~!!!!~^^^^~77??^^^J
@@@@Y^^^77!~^^:::^!!!!^:::.:!?7~..............^~^~7??7~^~^..............:^^^^:.::^!!!!^::::^~!7?!^^?
@@@@Y~~!777?7!!!!!7777~:::^7!~~7!::::::::::::^~^^JPB#PJ~^~^::::::::::::^775?J~:::^77777!!!!7?7777!~7
@@@@Y~77777!~^^^^~!!!!^::::!???7^.............~^^7YPPY?^^~:............^7:^:7^.::^!!!!~^^^^~!!77??!?
@@@@5!?J77777^:::^!!!!~:::..:^:................^~^~~~~^^7! .............:...:.:::^!!!!^:::^~7777JJ7J
@@@@G7?J77?JJ~^~~~!!!!!:::......................::^^^~PBBP?:..................:::~!!!!~~~~^?Y777JJ?5
@@@@&?JJ?!7?J?^^^:^!!!!^:::........................:^.7#@#G5~................:::^!!!!~:^^^~J?777?J?B
@@@@@5JJ?!77!~^:::^!!777^:::............::.........:^. ^P@&BP7::............::::7777!^:::^~!77!7?JY@
@@@@@#J??7!7!!!!!!!!7!!!!::::.....:...:^^..........:^....?&&BGY~^:.........::::~!!!7!!!!!!!!7!!7??B@
@@@@@@P777!!7?7!^^::^~!!!!^:::..:!^~:^^............:^.....~G@#G5!:^^^~:...::::!!!!!^::^^~7?7!!!!75@@
@@@@@@@Y!!!!!7!!!:::^~!!!!!^:.:.:^!?7^.............:^......:Y&&BP7^7?7~..:::^!!!!!~^:::~!!77!!!~J&@@
@@@@@@@&J~~!~!7??J7~~^^~!!!!7~::.::^~:.............^!:.......~P&#G7^^:^:::^7!!!!~^^~~^!JJ7!~!~^?#@@@
@@@@@@@@&J^~!~!77JJ~::::^7??7!~^:.................!Y7~.........!G&B7...:^~!77?7~::::^!J?7!~7~:?#@@@@
@@@@@@@@@@Y:^7!~!77~^:^!7!~~!!!!!^::..:...........~7J?...........7G#?:^~!!!!!~!7!~:^~!77~!7~.?&@@@@@
@@@@@@@@@@@P^:77~!7!!?7~::::^!!!!!!~~^:::.........^!~^.........::.^YGJ!!!!!~^:::~7?7!7!~7?^:5@@@@@@@
@@@@@@@@@@@@#?:~?7~!?7~~~^:^~~^~~!!7?!!~^^::::.::...:...:.::::^^~~!7?YJ!~^~~^^^~~~!?!~!?!:!B@@@@@@@@
@@@@@@@@@@@@@@P!^7J!~!77??7!~::::^?7!!!!!!!!~~7~^^^^^^^^~7~~!!!!!!!!7?!^:::^!JJ??7!~!??^~5&@@@@@@@@@
@@@@@@@@@@@@@@@&5!~7?!~!!?7J7^^:^?!:^^^~!!!!!!J!!!!!!!!!!J!!!!!!~^^^:~?^:^^~???!!~!??~~Y#@@@@@@@@@@@
@@@@@@@@@@@@@@@@@&5!~7?7~~!7!!~!J~:::::!^:^^^7?~~~~!!~~~~7?^^^^^!:::::^J!~!!7!~~7??~!Y#@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@&G?!!??7~~!!?7~~~7!!!^^:::J~::::~!::::^J::::^~!!77~~!?!!~~!??7!?P&@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@#P?!7??7!~~!!!????J!^^~J^^^~^!!~^^^:?!^^^!??JJ7!!~~!7??77?5B@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@#PJ777??7!~~~~!!!!!??!!!??YYJ!~!!7J!!!!!~~~~!77??77J5B@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@&BPJ?77??77!!!~~~~~~~~~!!~~~~~~~~~~!!77??77?J5G&@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&#G5YJ??77???77777777777777???77???Y5G#&@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&#BGP5YJJ??????????JJY55GB#&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"""